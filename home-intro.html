<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>个人信息</title>
    <link rel="stylesheet" href="css/style.css">        
</head>
<body>
<div id="loading">
    <div class="spinner">
    <div class="bounce1"></div>
    <div class="bounce2"></div>
    <div class="bounce3"></div>
    </div>
</div>
<dl class="per_wrap">  
  <dd><a href="modify.html" style="display:block;">修改密码</a></dd>

  <!-- 
  <dt>
    <div class="per_icon">
      <a id="selectfiles" href="javascript:void(0);" class="btn"><img id="imgfile" name="imgfile" src="images/user_head.jpg" height="50"></a>
    </div>
  <div id="ossfile"></div>
  <p>头像</p>
  </dt><dd>昵称:<i id="vnickName" class="ng-binding">用户106961</i></dd>     
  <dd>个性签名：<i id="vuserDesc" class="ng-binding">每天盈彩多一点!</i></dd>
  <dd style="display: none;">专家简介：        
    <i id="vexpertIntroduction" class="ng-binding"></i>     
  </dd> -->
  <dd>昵称：<input type="text" placeholder="昵称" class="nickname"/></dd>
  <dd>真实姓名：<input type="text" placeholder="真实姓名" class="realname"/></dd>
  <dd>证件类型：<select class="cardtype"><option value="身份证">身份证</option><option value="户口簿">户口簿</option><option value="护照">护照</option><option value="军官证">军官证</option><option value="士兵证">士兵证</option><option value="警官证">警官证</option><option value="其他证件">其他证件</option></select></dd>
  <dd>证件号：<input type="text" placeholder="输入证件号" class="cardno"/></dd>
  <dd>QQ：<input type="number" placeholder="输入QQ号" class="qq"/></dd>
  <dd>性别：<select class="sex"><option value="男">男</option><option value="女">女</option></select></dd>
  <dd>联系地址：<input type="text" placeholder="输入地址" class="address"/></dd>
  <dd>邮编：<input type="number" placeholder="输入邮编" class="postcode"/></dd>
  <dd>个人简介：<textarea placeholder="输入简介" class="selfintroduce"></textarea></dd>

  <!--
  {realName：真实姓名，nickName：昵称，cardType：证件类型，cardNo：证件号，sex：性别，address：联系地址，postcode：邮编，qq：qq，selfIntroduce：个人简介}
  -->
  
</dl>
<div class="sumit_btn add_mu submit_save" >保存</div>
    

<script src="js/jquery.js" type="text/javascript"></script>       
<script src="js/common.js" type="text/javascript"></script> 
<script>
$(function (){
  var $username=$(".nickname");
  var $realname=$(".realname");
  var $cardtype_select=$(".cardtype");
  var $sex_select=$(".sex");
  var $cardno=$(".cardno");
  var $address=$(".address");
  var $postcode=$(".postcode");
  var $selfintroduce=$(".selfintroduce");
  var $qq=$(".qq");
  function getUserInfo(){
    $username.val(localStorage.getItem("username"));
    $realname.val(localStorage.getItem("realname"));
    $cardtype_select.val(localStorage.getItem("usercardtype"));
    $sex_select.val(localStorage.getItem("usersex"));
    $cardno.val(localStorage.getItem("usercardno"));
    $qq.val(localStorage.getItem("userqq"));
    $address.val(localStorage.getItem("useraddress"));
    $postcode.val(localStorage.getItem("userpostcode"));
    $selfintroduce.val(localStorage.getItem("userselfIntroduce"));
  }
  getUserInfo();
  $(".submit_save").click(function (){
    var username=$.trim($username.val());
    var realname=$.trim($realname.val());
    var usercardtype=$.trim($cardtype_select.val());
    var usercardno=$.trim($cardno.val());
    var usersex=$.trim($sex_select.val());
    var useraddress=$.trim($address.val());
    var userpostcode=$.trim($postcode.val());
    var userqq=$.trim($qq.val());
    var userselfIntroduce=$.trim($selfintroduce.val());
    var option={realName:realname,nickName:username,cardType:usercardtype,cardNo:usercardno,sex:usersex,address:useraddress,postcode:userpostcode,qq:userqq,selfIntroduce:userselfIntroduce};
    $.ajax({
          type:"get",
          url:"http://h5.wingoalclub.com/zucai/inf/saveUser",
          data:option,
          dataType:"json",
          error:function (){alert("保存个人信息出错");},
          success:function (data){
              if(data && data.status == 200 && data.error ==null){
                alert("个人信息已保存");
                  location.href="home.html";
                  localStorage.setItem("username",username);
                  localStorage.setItem("realname",realname);
                  localStorage.setItem("usercardtype",usercardtype);
                  localStorage.setItem("usercardno",usercardno);
                  localStorage.setItem("usersex",usersex);
                  localStorage.setItem("useraddress",useraddress);
                  localStorage.setItem("userpostcode",userpostcode);
                  localStorage.setItem("userqq",userqq);
                  localStorage.setItem("userselfIntroduce",userselfIntroduce);
              }else{
                  var errormsg=data.error || "出现未知错误";
                  alert(errormsg);
              }
          }
      });
  });
  
});
</script>      
</body>  
</html>
