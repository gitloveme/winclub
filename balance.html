<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>我的余额</title>
<link rel="stylesheet" href="css/style.css">        
</head>
<body>
<dl class="issue_box remain_last">
	<dd class="yue_hut">
		<p>账号：<i id="acct">12333344</i></p>
		<p>余额：<i> <em>0.00</em>元</i></p>
		<p>可提现金额：<i> <em>0.00</em>元</i><small>( 每月1-5日提交提现申请 )</small></p>
	</dd>

	<dt>账单明细</dt>
		<dd ng-repeat="item in lists">
			<p id="clev_cl">
				<a ng-bind="item.title">摩洛哥 VS 科特迪瓦</a >
				<span ng-class="setamountStyle({{item.accpuntType}})" ng-bind="item.amount">1234.50</span>
			</p>
			<time ng-bind="item.createTime">2017-1-24 11:26:52</time>
		</dd>
</dl>
<script src="js/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
$(function (){
	var defaultOption={page_index:1,page_num:20};
	var noLoadAll=true;
	var loadingSart = true;
	function loadDetail(op){
		defaultOption=$.extend(defaultOption,op);
		$.ajax({
			type:"get",
			url:"http://h5.wingoalclub.com/inf/accountDetail",
			data:defaultOption,
			dataType:"json",
			error:function (){loadingSart = true;},
			success:function (data){
				loadingSart = true;
				/*
				{
 "time":"交易时间",
"income":"收入金额",
"disburse":"支出金额",
"balance":"余额",
"type":"交易类型"（1:充值 2：提现 3：购买 4：售卖）
}

				 */
				if(data && data.status == 200){
					var records=data.records;//总记录数
					var list=data.data;
					var html='';
					var style=["未知","充值","提现","购买","售卖"];
					for(var i=0;i<list.length;i++){
						html+='<dd><p><a>'+style[list[i].type]+'</a><span>1234.50</span></p><time ng-bind="item.createTime">2017-1-24 11:26:52</time></dd>'
					}
				}
			}
		});
	}
	loadDetail();
	$(window).scroll(function (){
        var top= parseFloat($(window).height()) + parseFloat($(window).scrollTop()); 
        if($(document).height() <= top-10){
            if(loadingSart && noLoadAll){ 
                loadingSart=false;
                var pageNum=defaultOption.page_index+1;
                loadDetail({page_index:pageNum});
            } 
        } 
    });
});
</script>
</body>
</html>
