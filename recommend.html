<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>高手推荐</title>
<link rel="stylesheet" href="css/style.css">
</head>

<body>
<div id="loading">
    <div class="spinner">
    <div class="bounce1"></div>
    <div class="bounce2"></div>
    <div class="bounce3"></div>
    </div>
</div>
<ul class="ball-obj ball_thr">
    <li class="active">北京单场</li>
    <li>胜负玩法</li>
    <li>竞彩玩法</li>
</ul>
<div class="add_bg2">
    <dl class="hot_box hot_obj" id="recommendlist">
        <!-- <dd class="ng-scope"><section class="expert_case"><a href="expert.html?expertid=39db671794144693879a25328bcef687"><span class="head_cap"><img src="https://baoying365.oss-cn-shanghai.aliyuncs.com/bycimg_header_prod/Bkz4zmEjsi.jpeg"></span></a><div class="cap_cont"><em class="ng-binding">黄庆</em><mark class="ng-binding">高级专家</mark><span class="add_bgb"><i class="ng-binding">18中13</i></span></div></section><section class="ball_detail"><div class="ball_time"><small class="ng-binding">周一002</small><br ng-class="sethosStyle(1)"><em class="ng-binding">非洲杯</em><p id="contr_time" class="ng-binding">01-24 03:00</p></div><p class="span_contr"><strong><a class="ng-binding">塞内加尔</a> VS <a class="ng-binding">阿尔及利</a></strong><span class="star_box" style="position: absolute;right:10px">￥<em class="ng-binding">58.00</em></span></p><p class="ball_case txt_contr2"><span>类型：<a class="ng-binding">竞彩单关</a></span></p><p class="ball_case txt_contr2">推荐语:<a  class="ng-binding">塞内加尔真会放水？那可是上届的仇人</a></p><span class="tag ng-binding">购买</span></section></dd> -->
    </dl>
</div>

<ul class="foot_nav">
    <li class="index"><a href="index.html">首页</a></li>
    <li class="recommend active"><a>推荐</a></li>
    <li class="score" style="display: none;"><a href="race-live.html">比分</a></li>
    <li class="home"><a href="home.html">我的</a></li>
</ul>
<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/common.js" type="text/javascript"></script>
<script type="text/javascript">
$(function (){
    var defaultOption={role:3,type:1,page_index:1,page_num:10};/*默认北京专场，第一页每页10条*/
    var loadingSart = true;
    var noLoadAll=false;
/////
    function loadProficient(op,change){/*高手推荐*/
        defaultOption=$.extend(defaultOption,op);
        $.ajax({
            type:"get",
            url:"http://h5.wingoalclub.com/zucai/inf/expertRecommend",
            data:defaultOption,
            dataType:"json",
            success:function (data){
                if(data.status==200){
                    var list=data.data;
                    if(defaultOption.page_index*defaultOption.page_num >= parseInt(data.records)) {
                        noLoadAll=false;
                    }else{
                        noLoadAll=true;
                    }
                    var recommendhtml='';
                    /*
                    data={"status":"200","error":null,"data":[{"imageSrc":"http://www.wingoalclub.com/dist/avatars/20160529063744-35.jpg","nickname":"真正的周神","expertid":"16","recommendid":"10046","title":"美职-芝加哥火焰vs哥伦布机员","begin_match_time":"2016-10-14 08:30:00","home_team":"芝加哥火焰","guest_team":"哥伦布机员","content":"芝加哥火焰击败费城联合之后近5轮联赛1平4负的战绩表现不佳，球队战绩不佳主要是因为防守存在较大问题，5场比赛失球多到12个。\n  相比主队，客队的状态就要好很多了，他们近4场联赛赢了3场，其中包括了上场联赛3:0完胜了今天的对手芝加哥火焰，哥伦布机员无疑是在反弹的路上越走越稳。哥伦布机员近期前场进攻球员的状态确实不错，首席射手奥拉卡马拉，在对阵奥兰多城和新英格兰革命的比赛中攻入4球，帮助球队取得今年联赛的第二次连胜.\n  盘面数据告诉我们，不论初盘和即时盘口，都是相对看好客场作战的哥伦布机员。\n  单场官方不让球，推荐10。","create_time":"2016-10-13 22:11:02","is_hit":"未荐中","price":"50.00"}],"records":"2","objectNode":{},"arrayNode":[]}

                     */
                    var typeName=["北京单场","北京单场","胜负玩法","竞彩玩法"];
                    
                    var weekday=["周日","周一","周二","周三","周四","周五","周六"];
                    if(list==null || list.length==0){
                        recommendhtml='<dd class="nothing">没有更多数据啦</dd>'
                    }else{
                        for(var i=0;i<list.length;i++){
                            var type=defaultOption.type || 1;
                            var beginTime=$.trim(list[i].begin_match_time).substring(0,10);
                            var date=new Date(beginTime);
                            var d=date.getDay();
                            recommendhtml+='<dd expertid="'+list[i].expertid+'" recommendid="'+list[i].recommendid+'" title="'+list[i].title+'"><section class="expert_case"><a class="jumpexpert" expertid="'+list[i].expertid+'" expertimg="'+list[i].imageSrc+'" expertname="'+list[i].nickname+'" expertintro="'+list[i].content+'"><span class="head_cap"><img src="'+list[i].imageSrc+'"></span></a><div class="cap_cont"><em>'+list[i].nickname+'</em><mark>高级专家</mark></div></section><section class="ball_detail"><div class="ball_time"><small>'+weekday[d]+'</small><p>'+list[i].begin_match_time.substring(5,16)+'</p></div><p class="span_contr"><strong>'+list[i].title+'</strong><span class="star_box" style="position: absolute;right:10px">￥<em>'+list[i].price+'</em></span></p><p class="ball_case txt_contr2"><span>类型：<a>'+typeName[type]+'</a></span></p><p class="ball_case txt_contr2">推荐语:<a>'+list[i].content+'</a></p><span class="tag">购买</span></section></dd>';
                        }
                    }
                    if(!change){
                        $("#recommendlist").append(recommendhtml);
                    }else{
                        $("#recommendlist").empty().html(recommendhtml);
                    }
                }
            }
        });
    }

    loadProficient();
    $(".ball_thr").find("li").click(function (){
        var that=$(this);
        if(that.hasClass("active")) return false;
        that.addClass("active").siblings().removeClass("active");
        loadProficient({page_index:1,type:that.index()+1},1);
    });
    $(window).on("click",".expert_intr",function (){
        jumpExpert($(this));
    }).on("click",".payrecommend",function (){//支付

    });
    $(window).scroll(function (){
        var top= parseFloat($(window).height()) + parseFloat($(window).scrollTop()); 
        if($(document).height()-10 <= top){
            if(loadingSart && noLoadAll){ 
                loadingSart=false;
                var pageNum=defaultOption.page_index+1;
                loadProficient({page_index:pageNum});
            } 
        } 
    });
});
</script> 
</body>
</html>
